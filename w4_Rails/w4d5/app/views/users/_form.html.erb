<% action_url = user.persisted? ? user_url(user) : users_url %>
<% http_method = user.persisted? ? "PATCH" : "POST" %>

<form action=<%= action_url %> method=<%= http_method %>>
  <input
    type="hidden"
    name="authenticity_token"
    value="<%= form_authenticity_token %>">

  <label for="email">Email</label>
  <input id="email" type="text" name="user[email]">

  <label for="password">Password</label>
  <input id="password" type="password" name="user[password]">

  <input id="Submit" type="submit">
</form>
